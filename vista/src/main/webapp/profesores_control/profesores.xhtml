<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>SAUAP - Profesores</title>
    <h:outputStylesheet library="primefaces" name="primeicons/primeicons.css"/>
</h:head>

<h:body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="brand">
                <p:graphicImage url="resources/user.png" styleClass="logo-mini" />
                <div>
                    <strong>SAUAP</strong><br/>
                    <small>Sistema Académico</small>
                </div>
            </div>

            <div class="nav">
                <h:link outcome="/index" styleClass="nav-item"><i class="pi pi-home"></i> <span class="nav-text">Panel de Control</span></h:link>
                <h:link outcome="/profesores_control/profesores" styleClass="nav-item"><i class="pi pi-users"></i> <span class="nav-text">Profesores</span></h:link>
                <h:link outcome="/unidades" styleClass="nav-item"><i class="pi pi-book"></i> <span class="nav-text">Unidades de Aprendizaje</span></h:link>
                <h:link outcome="/asignaciones" styleClass="nav-item"><i class="pi pi-list-check"></i> <span class="nav-text">Asignaciones</span></h:link>
            </div>

            <div class="logout">
                <h:form id="logoutForm">
                    <p:commandButton value="Cerrar Sesión" icon="pi pi-sign-out" styleClass="ui-button-secondary ui-button-flat" action="#{loginUI.logout}" ajax="false" process="@this" update="@none"/>
                </h:form>
            </div>
        </aside>

        <!-- Contenido -->
        <section class="content">
            <!-- Barra superior -->
            <div class="topbar">
                <span>Sistema de Asignación de Unidades de Aprendizaje a Profesores</span>
            </div>

            <div class="main">
                <div class="header-profesores">
                    <div class="titulo">
                        <h1>Gestión de Profesores</h1>
                        <div class="subtitle">
                            Administra el registro e información de profesores
                        </div>
                    </div>

                    <div class="registrarProfesor">
                        <h:form id="registrarProfesorForm">
                            <h:link outcome="/profesores_control/nuevoProfesor" styleClass="nav-item">
                                <i class="pi pi-plus"></i> <span class="nav_text">Nuevo Profesor</span>
                            </h:link>
                        </h:form>
                    </div>
                </div>

                <!-- Panel con tabla -->
                <p:panel styleClass="cards">
                    <h2>Lista de Profesores</h2>

                    <h:form id="tablaProfesoresForm">
                    <!-- Barra de búsqueda -->
                        <div class="searchbar">
                            <i class="pi pi-search"></i>
                            <p:inputText id="filtroNombre"
                                         value="#{profesorBean.nombreFiltro}"
                                         placeholder="Buscar por nombre"
                                         styleClass="search-input">
                                <p:ajax event="keyup"
                                        update="tablaProfesores"
                                        listener="#{profesorBean.aplicarFiltro}"/>
                            </p:inputText>
                        </div>
                        <br></br>
                        <p:dataTable id="tablaProfesores"
                                     value="#{profesorBean.listaFiltrada}"
                                     var="prof"
                                     emptyMessage="Sin profesores registrados"
                                     reflow="true"
                                     widgetVar="profTable">

                            <p:column headerText="ID">
                                <h:outputText value="#{prof.id}"/>
                            </p:column>

                            <p:column headerText="Nombre">
                                <h:outputText value="#{prof.nombre}"/>
                            </p:column>

                            <p:column headerText="Apellido Paterno">
                                <h:outputText value="#{prof.apPrimero}"/>
                            </p:column>

                            <p:column headerText="Apellido Materno">
                                <h:outputText value="#{prof.apSegundo}"/>
                            </p:column>

                            <p:column headerText="RFC">
                                <h:outputText value="#{prof.rfc}"/>
                            </p:column>

                        </p:dataTable>
                        <!-- Tabla -->
                    </h:form>
                </p:panel>
            </div>
        </section>
    </div>
</h:body>

<style>
    .logo{
        width: 170px; }
    .celda{
        width: 25%;
        background-color: #089b4d;
        color:white; }
    .txt{
        background: transparent;
        box-shadow: none;
        height: auto; width: auto; padding: 0; margin: 0;
    }

    html, body {
        height:100%;
        margin:0;
        font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif; }
    .app {
        display:flex;
        min-height:100vh; }
    .sidebar {
        width:220px;
        background:#efefef;
        display:flex;
        flex-direction:column;
        border-right:1px solid #ddd;
        box-sizing: border-box;
    }

    .brand {
        display:flex;
        gap:10px; align-items:center;
        padding:12px 14px;
        background:#0f8a3b;
        color:#fff; }
    .logo-mini{
        width:28px;
        height:28px;
        border-radius:50%;
        background:#fff; }
    .nav {
        padding:12px;
        flex:1;
        display:flex;
        flex-direction:column;
        gap:8px;
        box-sizing: border-box;}
    .nav .nav-item{
        display:flex;
        align-items:center;
        gap:10px;
        margin: 0;
        width:100%;
        padding:10px 12px;
        background:#fff;
        border:1px solid #e3e3e3;
        border-radius:8px;
        text-decoration:none;
        color:#333;
        box-sizing: border-box;
    }
    .nav .nav-item:hover{
        box-shadow:0 2px 8px rgba(0,0,0,.06);
    }
    .nav .nav-item i{
        font-size:1rem;
        line-height:1;
    }
    .ui-g{
        background-color: white;
        border-color:transparent ;
    }
    .logout {
        padding:12px;
        border-top:1px solid #ddd; }
    .content { flex:1;
        display:flex;
        flex-direction:column; }
    .topbar {
        background:#177d39;
        color:#fff;
        padding:10px 18px;
        font-size:14px;
        display:flex;
        align-items:center; }
    .titulo {
        float: left;
    }
    .registrarProfesor {
        float: right;
        align-items:center;
        gap:10px;
        margin: 0;
        width:15%;
        padding:10px 12px;
        background: #23a503;
        border:1px solid #23a503;
        border-radius:8px;
        box-sizing: border-box;
    }
    .registrarProfesor .nav-item {
        text-decoration:none;
        color: #ffffff;
        font-size:1rem;
        line-height:1;
    }
    .main {
        padding:22px; }
    h1 {
        margin:0 0 6px 0;
        font-size:30px; }
    .subtitle {
        color:#666;
        margin-bottom:18px; }
    .cards {
        margin-top: 7%;
        width:100%;
        height: 80%;
        max-width:1200px; }
    .cards .ui-panel {
        background:#f4f4f4;
        border-radius:12px;
        border:1px solid #e3e3e3;
        box-shadow:0 3px 10px rgba(0,0,0,.06);
        padding:16px; }
    .card-title {
        color:#555;
        font-weight:700;
        margin-bottom:10px;
        display:block; }
    .card-number {
        font-size:26px;
        font-weight:800;
        color:#222;
        margin-bottom:4px;
        display:block; }
    .card-sub {
        color:#666;
        font-size:13px;
        display:block; }
    .search-bar {
        margin-bottom: 12px;
    }
    .search-input {
        width: 250px;
        padding: 6px 10px;
        border: 1px solid #ccc;
        border-radius: 6px;
    }
    .ui-datatable thead th {
        background: #23a503;
        color: white;
        text-align: center;
    }
    .ui-datatable tbody td {
        text-align: center;
    }
    .pi-search {
        padding: 5px;
    }

</style>
</html>
