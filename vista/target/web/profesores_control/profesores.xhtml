<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Gestion de Profesores</title>
    <h:outputStylesheet library="primefaces" name="primeicons/primeicons.css"/>
</h:head>

<h:body>
    <div class="app">
        <aside class="sidebar">
            <div class="brand">
                <p:graphicImage url="resources/user.png" styleClass="logo-mini"/>
                <div>
                    <strong>SAUAP</strong><br/>
                    <small>Sistema Academico</small>
                </div>
            </div>

            <div class="nav">
                <h:link outcome="/index" styleClass="nav-item"><i class="pi pi-home"></i><span class="nav-text">Panel de Control</span></h:link>
                <h:link outcome="/profesores_control/profesores" styleClass="nav-item"><i class="pi pi-users"></i><span class="nav-text">Profesores</span></h:link>
                <h:link outcome="/unidades" styleClass="nav-item"><i class="pi pi-book"></i><span class="nav-text">Unidades de Aprendizaje</span></h:link>
                <h:link outcome="/asignaciones" styleClass="nav-item"><i class="pi pi-list-check"></i><span class="nav-text">Asignaciones</span></h:link>
                <h:link outcome="/horarios"     styleClass="nav-item"><i class="pi pi-calendar"></i>     <span class="nav-text">Horarios</span></h:link>
            </div>

            <div class="logout">
                <h:form id="logoutForm">
                    <p:commandButton value="Cerrar Sesion" icon="pi pi-sign-out"
                                     styleClass="ui-button-secondary ui-button-flat"
                                     action="#{loginUI.logout}" ajax="false" process="@this" update="@none"/>
                </h:form>
            </div>
        </aside>

        <section class="content">
            <div class="topbar">
                <span>Sistema de Asignacion de Unidades de Aprendizaje a Profesores</span>
            </div>

            <div class="main">
                <h1>Gestion de Profesores</h1>
                <div class="subtitle">Administra el registro e informacion de profesores</div>

                <h:form id="tablaProfesoresForm">
                    <div class="toolbar">
                        <p:button value="Nuevo Profesor"
                                  icon="pi pi-plus"
                                  outcome="/profesores_control/nuevoProfesor"
                                  styleClass="ui-button-success btn-new"/>
                    </div>

                    <p:panel styleClass="catalogo-panel">
                        <f:facet name="header">
                            <i class="pi pi-th-large"></i>
                            <span> Catalogo de Profesores</span>
                        </f:facet>

                        <div class="searchbar">
                            <i class="pi pi-search"></i>
                            <p:inputText id="filtroNombre"
                                         value="#{profesorBean.nombreFiltro}"
                                         placeholder="Buscar por nombre"
                                         styleClass="search-input">
                                <p:ajax event="keyup"
                                        update="tablaProfesores"
                                        listener="#{profesorBean.aplicarFiltro}"/>
                            </p:inputText>
                        </div>

                        <p:dataTable id="tablaProfesores"
                                     value="#{profesorBean.listaFiltrada}"
                                     var="prof"
                                     responsiveLayout="scroll"
                                     emptyMessage="Sin profesores registrados"
                                     rowHover="true"
                                     paginator="false"
                                     styleClass="ua-table">

                            <p:column headerText="ID">
                                <h:outputText value="#{prof.id}"/>
                            </p:column>

                            <p:column headerText="Nombre">
                                <h:outputText value="#{prof.nombre}"/>
                            </p:column>

                            <p:column headerText="Apellido Paterno">
                                <h:outputText value="#{prof.apPrimero}"/>
                            </p:column>

                            <p:column headerText="Apellido Materno">
                                <h:outputText value="#{prof.apSegundo}"/>
                            </p:column>

                            <p:column headerText="RFC">
                                <h:outputText value="#{prof.rfc}"/>
                            </p:column>

                        </p:dataTable>
                    </p:panel>
                </h:form>
            </div>
        </section>
    </div>
</h:body>

<style>
    /* layout base */
    .logo {
        width: 170px;
    }

    .txt {
        background: transparent;
        box-shadow: none;
        height: auto;
        width: auto;
        padding: 0;
        margin: 0;
    }

    html,
    body {
        height: 100%;
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    }

    .app {
        display: flex;
        min-height: 100vh;
    }

    /* sidebar */
    .sidebar {
        width: 220px;
        background: #efefef;
        display: flex;
        flex-direction: column;
        border-right: 1px solid #ddd;
        box-sizing: border-box;
    }

    .brand {
        display: flex;
        gap: 10px;
        align-items: center;
        padding: 12px 14px;
        background: #0f8a3b;
        color: #fff;
    }

    .logo-mini {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: #fff;
    }

    .nav {
        padding: 12px;
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 8px;
        box-sizing: border-box;
    }

    .nav .nav-item {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 0;
        width: 100%;
        padding: 10px 12px;
        background: #fff;
        border: 1px solid #e3e3e3;
        border-radius: 8px;
        text-decoration: none;
        color: #333;
        box-sizing: border-box;
    }

    .nav .nav-item:hover {
        box-shadow: 0 2px 8px rgba(0, 0, 0, .06);
    }

    .nav .nav-item i {
        font-size: 1rem;
        line-height: 1;
    }

    .logout {
        padding: 12px;
        border-top: 1px solid #ddd;
    }

    /* contenido */
    .content {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .topbar {
        background: #177d39;
        color: #fff;
        padding: 10px 18px;
        font-size: 14px;
        display: flex;
        align-items: center;
    }

    .main {
        padding: 22px;
    }

    h1 {
        margin: 0 0 6px 0;
        font-size: 30px;
    }

    .subtitle {
        color: #666;
        margin-bottom: 18px;
    }

    /* toolbar + boton nuevo */

    /* toolbar */
    .toolbar {
        display: flex;
        justify-content: flex-end;
        margin-bottom: 12px;
    }

    .btn-new{
        background: #198754;
        border: 0;
        color: #fff;
        border-radius: 10px;
        padding: .55rem .95rem .55rem .75rem;
        font-weight: 700;
        box-shadow: 0 2px 0 rgba(0,0,0,.10);
    }

    .btn-new:hover{
        filter: brightness(.97);
    }

    .btn-new .ui-button-icon-left{
        position: static;
        margin: 0 .45rem 0 0;
        font-size: 1.15rem;
        color: #fff;
    }

    .btn-new .ui-button-text{
        padding: 0;
    }


    /* panel catalogo */
    .catalogo-panel {
        border: 1px solid #e3e3e3;
        border-radius: 12px;
        padding: 14px;
        background: #f7f7f7;
    }

    .catalogo-panel .ui-panel-titlebar {
        border: none;
        background: transparent;
        padding: 0 0 8px 0;
        font-weight: 700;
        font-size: 16px;
        color: #333;
    }

    .catalogo-panel .ui-panel-titlebar i {
        margin-right: 8px;
    }

    /* buscador */
    .searchbar {
        position: relative;
        margin: 6px 0 10px 0;
    }

    .searchbar i {
        position: absolute;
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 1rem;
        color: #777;
    }

    .search-input {
        width: 320px;
        padding-left: 32px;
    }

    /* tabla comun */
    .ua-table {
        border: 1px solid #e3e3e3;
        border-radius: 10px;
        overflow: hidden;
        background: #fff;
    }

    .ua-table .ui-datatable-header,
    .ua-table .ui-datatable-footer {
        display: none;
    }

    .ua-table th {
        background: #efefef;
        color: #333;
        font-weight: 700;
        border-bottom: 1px solid #e3e3e3;
    }

    .ua-table td {
        border-bottom: 1px solid #eee;
    }

    .ua-table .ui-datatable-data tr:hover {
        background: #f5f5f5;
    }


    .btn-new.ui-button,
    .ui-button.btn-new{
        background: linear-gradient(#43a047, #2e7d32);
        border: 1px solid #0e6b16;
        color: #fff;
        border-radius: 10px;
        padding: .55rem .95rem .55rem .75rem;
        font-weight: 700;
        box-shadow: 0 2px 0 rgba(0,0,0,.10);
    }
    .btn-new.ui-button.ui-button-text-icon-left,
    .ui-button.btn-new.ui-button-text-icon-left{
        padding-left: .75rem;
    }

    /* icono a la izquierda, en linea y con espacio */
    .btn-new.ui-button .ui-button-icon-left,
    .ui-button.btn-new .ui-button-icon-left{
        position: static;
        display: inline-block;
        margin: 0 .45rem 0 0;
        width: 1.35rem;
        height: 1.35rem;
        line-height: 1.35rem;
        font-size: 1.15rem;
        color: #fff;
        vertical-align: middle;
    }

    /* el texto va en la misma linea del icono */
    .btn-new.ui-button .ui-button-text,
    .ui-button.btn-new .ui-button-text{
        display: inline;
        padding: 0;
        vertical-align: middle;
    }

    /* hover igual al de UA */
    .btn-new.ui-button:hover,
    .ui-button.btn-new:hover{
        filter: brightness(.95);
    }

</style>

</html>
